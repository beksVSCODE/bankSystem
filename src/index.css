@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

/* Sovcombank-inspired Banking Design System */

@layer base {

    /* Disable pull-to-refresh on mobile for better UX */
    body {
        overscroll-behavior-y: contain;
    }

    /* Предотвращение скролла фона при открытых модальных окнах */
    body.body-scroll-lock,
    html:has(body.body-scroll-lock) {
        overflow: hidden !important;
        position: fixed !important;
        width: 100% !important;
    }

    /* Дополнительная защита для iOS Safari */
    @supports (-webkit-touch-callout: none) {
        body.body-scroll-lock {
            position: fixed;
            overflow: hidden;
            width: 100%;
        }
    }


    :root {
        /* Core Banking Colors - Sovcombank Blue */
        --background: 210 20% 98%;
        --foreground: 220 20% 10%;

        --card: 0 0% 100%;
        --card-foreground: 220 20% 10%;

        --popover: 0 0% 100%;
        --popover-foreground: 220 20% 10%;

        /* Primary - Sovcombank Blue #0050B3 */
        --primary: 209 100% 35%;
        --primary-foreground: 0 0% 100%;

        /* Secondary - Light Blue */
        --secondary: 210 40% 96%;
        --secondary-foreground: 209 100% 35%;

        --muted: 210 20% 96%;
        --muted-foreground: 215 16% 47%;

        --accent: 209 100% 95%;
        --accent-foreground: 209 100% 35%;

        --destructive: 0 84% 60%;
        --destructive-foreground: 0 0% 100%;

        /* Success - for positive amounts */
        --success: 142 76% 36%;
        --success-foreground: 0 0% 100%;

        /* Warning - for pending states */
        --warning: 38 92% 50%;
        --warning-foreground: 0 0% 100%;

        --border: 214 32% 91%;
        --input: 214 32% 91%;
        --ring: 209 100% 35%;

        --radius: 0.5rem;

        /* Sidebar */
        --sidebar-background: 209 100% 35%;
        --sidebar-foreground: 210 40% 98%;
        --sidebar-primary: 0 0% 100%;
        --sidebar-primary-foreground: 209 100% 35%;
        --sidebar-accent: 209 100% 40%;
        --sidebar-accent-foreground: 0 0% 100%;
        --sidebar-border: 209 100% 30%;
        --sidebar-ring: 0 0% 100%;

        /* Banking-specific tokens */
        --bank-gradient: linear-gradient(135deg, hsl(209, 100%, 35%) 0%, hsl(209, 100%, 25%) 100%);
        --card-gradient: linear-gradient(135deg, hsl(209, 100%, 40%) 0%, hsl(209, 100%, 30%) 100%);
        --shadow-bank: 0 4px 20px -4px hsl(209 100% 35% / 0.15);
        --shadow-card: 0 2px 12px -2px hsl(220 20% 10% / 0.08);
    }

    .dark {
        --background: 220 20% 10%;
        --foreground: 210 40% 98%;

        --card: 220 20% 14%;
        --card-foreground: 210 40% 98%;

        --popover: 220 20% 14%;
        --popover-foreground: 210 40% 98%;

        --primary: 209 100% 50%;
        --primary-foreground: 0 0% 100%;

        --secondary: 217 33% 17%;
        --secondary-foreground: 210 40% 98%;

        --muted: 217 33% 17%;
        --muted-foreground: 215 20% 65%;

        --accent: 217 33% 17%;
        --accent-foreground: 210 40% 98%;

        --destructive: 0 63% 31%;
        --destructive-foreground: 210 40% 98%;

        --success: 142 76% 36%;
        --success-foreground: 0 0% 100%;

        --warning: 38 92% 50%;
        --warning-foreground: 0 0% 100%;

        --border: 217 33% 17%;
        --input: 217 33% 17%;
        --ring: 212 27% 84%;

        --sidebar-background: 220 20% 8%;
        --sidebar-foreground: 240 5% 96%;
        --sidebar-primary: 224 76% 48%;
        --sidebar-primary-foreground: 0 0% 100%;
        --sidebar-accent: 240 4% 16%;
        --sidebar-accent-foreground: 240 5% 96%;
        --sidebar-border: 240 4% 16%;
        --sidebar-ring: 217 91% 60%;
    }
}

@layer base {
    * {
        @apply border-border;
    }

    body {
        @apply bg-background text-foreground font-sans antialiased;
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    }

    /* Custom scrollbar */
    ::-webkit-scrollbar {
        width: 6px;
        height: 6px;
    }

    ::-webkit-scrollbar-track {
        background: hsl(var(--muted));
        border-radius: 3px;
    }

    ::-webkit-scrollbar-thumb {
        background: hsl(var(--muted-foreground) / 0.3);
        border-radius: 3px;
    }

    ::-webkit-scrollbar-thumb:hover {
        background: hsl(var(--muted-foreground) / 0.5);
    }
}

@layer components {

    /* Banking card styles */
    .bank-card {
        @apply relative overflow-hidden rounded-2xl p-6;
        background: var(--card-gradient);
        box-shadow: var(--shadow-bank), 0 0 0 1px rgba(255, 255, 255, 0.1) inset;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .bank-card::before {
        content: '';
        position: absolute;
        top: -50%;
        right: -50%;
        width: 100%;
        height: 100%;
        background: radial-gradient(circle, rgba(255, 255, 255, 0.15) 0%, transparent 70%);
        pointer-events: none;
    }

    /* Animated gradient background */
    @keyframes gradient-shift {

        0%,
        100% {
            background-position: 0% 50%;
        }

        50% {
            background-position: 100% 50%;
        }
    }

    .bank-card-animated {
        background: linear-gradient(135deg,
                hsl(209, 100%, 35%) 0%,
                hsl(209, 100%, 25%) 25%,
                hsl(209, 100%, 35%) 50%,
                hsl(209, 100%, 25%) 75%,
                hsl(209, 100%, 35%) 100%);
        background-size: 200% 200%;
        animation: gradient-shift 15s ease infinite;
    }

    /* Stats card */
    .stats-card {
        @apply bg-card rounded-2xl p-5 border border-border relative;
        box-shadow: var(--shadow-card);
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .stats-card:hover {
        transform: translateY(-4px);
        box-shadow: 0 12px 32px -8px hsl(220 20% 10% / 0.15);
    }

    .stats-card::after {
        content: '';
        position: absolute;
        inset: 0;
        border-radius: inherit;
        padding: 1px;
        background: linear-gradient(135deg, transparent, hsl(var(--primary) / 0.1), transparent);
        -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
        -webkit-mask-composite: xor;
        mask-composite: exclude;
        opacity: 0;
        transition: opacity 0.3s ease;
    }

    .stats-card:hover::after {
        opacity: 1;
    }

    /* Table styles */
    .bank-table {
        @apply w-full;
    }

    .bank-table th {
        @apply text-left text-xs font-semibold text-muted-foreground uppercase tracking-wider py-3 px-4;
    }

    .bank-table td {
        @apply py-4 px-4 border-b border-border;
    }

    .bank-table tr:hover td {
        @apply bg-muted/50;
    }

    /* Amount formatting */
    .amount-positive {
        @apply text-success font-medium;
    }

    .amount-negative {
        @apply text-destructive font-medium;
    }

    /* Navigation link */
    .nav-link {
        @apply flex items-center gap-3 px-4 py-3 rounded-lg text-sidebar-foreground/80 transition-all duration-200;
    }

    .nav-link:hover {
        @apply bg-sidebar-accent text-sidebar-foreground;
    }

    .nav-link.active {
        @apply bg-white/10 text-sidebar-foreground font-medium;
    }

    /* Button variants */
    .btn-bank {
        @apply inline-flex items-center justify-center rounded-lg px-4 py-2.5 text-sm font-medium transition-all duration-200;
        @apply bg-primary text-primary-foreground hover:bg-primary/90;
        @apply focus:outline-none focus:ring-2 focus:ring-primary/20 focus:ring-offset-2;
    }

    .btn-bank-outline {
        @apply inline-flex items-center justify-center rounded-lg px-4 py-2.5 text-sm font-medium transition-all duration-200;
        @apply border border-primary text-primary hover:bg-primary/5;
        @apply focus:outline-none focus:ring-2 focus:ring-primary/20 focus:ring-offset-2;
    }

    /* Input styles */
    .input-bank {
        @apply w-full rounded-lg border border-input bg-background px-4 py-3 text-sm transition-colors;
        @apply placeholder:text-muted-foreground;
        @apply focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary;
    }

    /* Sidebar animation */
    .sidebar-enter {
        animation: slideIn 0.3s ease-out;
    }

    /* Stagger animation for lists */
    @keyframes staggerIn {
        from {
            opacity: 0;
            transform: translateY(10px);
        }

        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .stagger-item {
        animation: staggerIn 0.5s ease-out backwards;
    }

    /* Scale on active for mobile feedback */
    .active-scale:active {
        transform: scale(0.97);
    }

    /* Shimmer loading effect */
    @keyframes shimmer {
        0% {
            background-position: -1000px 0;
        }

        100% {
            background-position: 1000px 0;
        }
    }

    .shimmer {
        background: linear-gradient(to right,
                hsl(var(--muted)) 0%,
                hsl(var(--muted-foreground) / 0.1) 50%,
                hsl(var(--muted)) 100%);
        background-size: 1000px 100%;
        animation: shimmer 2s infinite;
    }

    /* Modern card with glassmorphism */
    .glass-card {
        @apply backdrop-blur-lg bg-white/80 border border-white/20 rounded-2xl shadow-xl;
    }

    .dark .glass-card {
        @apply bg-card/80 border-white/10;
    }

    /* Interactive cards with tilt effect */
    @media (hover: hover) {
        .tilt-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .tilt-card:hover {
            transform: perspective(1000px) rotateX(2deg) rotateY(2deg);
        }
    }

    /* Ripple effect for buttons */
    @keyframes ripple {
        to {
            transform: scale(4);
            opacity: 0;
        }
    }

    .ripple {
        position: relative;
        overflow: hidden;
    }

    .ripple::after {
        content: '';
        position: absolute;
        top: 50%;
        left: 50%;
        width: 10px;
        height: 10px;
        background: rgba(255, 255, 255, 0.5);
        border-radius: 50%;
        transform: scale(0);
        transition: transform 0.5s, opacity 0.5s;
    }

    .ripple:active::after {
        animation: ripple 0.6s ease-out;
    }

    /* Notification badge pulse */
    @keyframes badge-pulse {

        0%,
        100% {
            transform: scale(1);
            opacity: 1;
        }

        50% {
            transform: scale(1.1);
            opacity: 0.8;
        }
    }

    .badge-pulse {
        animation: badge-pulse 2s ease-in-out infinite;
    }

    @keyframes slideIn {
        from {
            transform: translateX(-100%);
            opacity: 0;
        }

        to {
            transform: translateX(0);
            opacity: 1;
        }
    }

    @keyframes slideInFromRight {
        from {
            transform: translateX(100%);
            opacity: 0;
        }

        to {
            transform: translateX(0);
            opacity: 1;
        }
    }

    .animate-slideInFromRight {
        animation: slideInFromRight 0.3s ease-out;
    }

    /* Fade animation */
    .fade-in {
        animation: fadeIn 0.4s ease-out;
    }

    @keyframes fadeIn {
        from {
            opacity: 0;
            transform: translateY(10px);
        }

        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
}

/* Ant Design overrides for banking theme */
.ant-btn-primary {
    background: hsl(var(--primary)) !important;
    border-color: hsl(var(--primary)) !important;
}

.ant-btn-primary:hover {
    background: hsl(var(--primary) / 0.9) !important;
    border-color: hsl(var(--primary) / 0.9) !important;
}

.ant-input:focus,
.ant-input-focused {
    border-color: hsl(var(--primary)) !important;
    box-shadow: 0 0 0 2px hsl(var(--primary) / 0.1) !important;
}

.ant-table-thead>tr>th {
    background: hsl(var(--muted)) !important;
    font-weight: 600 !important;
}

.ant-menu-item-selected {
    background: hsl(var(--primary) / 0.1) !important;
    color: hsl(var(--primary)) !important;
}

.ant-card {
    border-radius: 12px !important;
    border: 1px solid hsl(var(--border)) !important;
}

/* Responsive utilities */
@layer utilities {

    /* Modern glassmorphism effect */
    .glass-effect {
        background: rgba(255, 255, 255, 0.8);
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.18);
    }

    .glass-effect-dark {
        background: rgba(0, 0, 0, 0.4);
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.1);
    }

    /* Neumorphism shadows */
    .neu-shadow {
        box-shadow: 8px 8px 16px rgba(163, 177, 198, 0.6),
            -8px -8px 16px rgba(255, 255, 255, 0.5);
    }

    .neu-shadow-inset {
        box-shadow: inset 8px 8px 16px rgba(163, 177, 198, 0.6),
            inset -8px -8px 16px rgba(255, 255, 255, 0.5);
    }

    /* Gradient text */
    .gradient-text {
        background: linear-gradient(135deg, #0051a8 0%, #00a3ff 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }

    .gradient-text-success {
        background: linear-gradient(135deg, #00c853 0%, #64dd17 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }

    .gradient-text-danger {
        background: linear-gradient(135deg, #d32f2f 0%, #f44336 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }

    /* Floating animation */
    @keyframes float {

        0%,
        100% {
            transform: translateY(0px);
        }

        50% {
            transform: translateY(-10px);
        }
    }

    .animate-float {
        animation: float 3s ease-in-out infinite;
    }

    /* Pulse glow effect */
    @keyframes pulse-glow {

        0%,
        100% {
            box-shadow: 0 0 0 0 rgba(0, 81, 168, 0.4);
        }

        50% {
            box-shadow: 0 0 20px 10px rgba(0, 81, 168, 0);
        }
    }

    .animate-pulse-glow {
        animation: pulse-glow 2s ease-in-out infinite;
    }

    /* Skeleton loading animation */
    @keyframes skeleton-loading {
        0% {
            background-position: -200px 0;
        }

        100% {
            background-position: calc(200px + 100%) 0;
        }
    }

    .skeleton {
        background: linear-gradient(90deg,
                rgba(243, 244, 246, 1) 0px,
                rgba(229, 231, 235, 1) 40px,
                rgba(243, 244, 246, 1) 80px);
        background-size: 200px 100%;
        animation: skeleton-loading 1.4s ease-in-out infinite;
    }

    /* Touch-friendly tap targets on mobile */
    @media (max-width: 640px) {
        .nav-link {
            min-height: 44px;
        }

        .ant-btn {
            min-height: 44px;
            border-radius: 12px;
        }

        /* Larger tap targets for mobile */
        button,
        a {
            min-height: 44px;
        }

        /* Active state feedback */
        button:active,
        .nav-link:active {
            transform: scale(0.97);
            transition: transform 0.1s ease;
        }
    }

    /* Prevent text selection on buttons */
    button,
    .nav-link {
        -webkit-tap-highlight-color: transparent;
        user-select: none;
    }

    /* Smooth scrolling */
    html {
        scroll-behavior: smooth;
    }

    /* Hide scrollbar but keep functionality */
    .hide-scrollbar {
        -ms-overflow-style: none;
        scrollbar-width: none;
    }

    .hide-scrollbar::-webkit-scrollbar {
        display: none;
    }

    /* Responsive text sizing */
    .text-responsive-xs {
        font-size: clamp(0.625rem, 2vw, 0.75rem);
    }

    .text-responsive-sm {
        font-size: clamp(0.75rem, 2.5vw, 0.875rem);
    }

    .text-responsive-base {
        font-size: clamp(0.875rem, 3vw, 1rem);
    }

    .text-responsive-lg {
        font-size: clamp(1rem, 3.5vw, 1.125rem);
    }

    .text-responsive-xl {
        font-size: clamp(1.125rem, 4vw, 1.25rem);
    }

    .text-responsive-2xl {
        font-size: clamp(1.5rem, 5vw, 2rem);
    }

    .text-responsive-3xl {
        font-size: clamp(1.875rem, 6vw, 2.5rem);
    }
}

/* Глобальные стили для модальных окон - предотвращение скролла фона */
.ant-modal-wrap,
.ant-modal-root .ant-modal-wrap {
    overscroll-behavior: contain;
}

.ant-modal-body {
    overscroll-behavior: contain;
    -webkit-overflow-scrolling: touch;
}

/* Предотвращаем скролл overlay */
.ant-modal-mask {
    touch-action: none;
}

/* Mobile optimizations */
@media (max-width: 768px) {

    /* iOS safe area support */
    body {
        padding-top: env(safe-area-inset-top);
        padding-bottom: env(safe-area-inset-bottom);
    }

    /* Reduce padding on cards for mobile */
    .ant-card {
        border-radius: 16px !important;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08),
            0 1px 2px rgba(0, 0, 0, 0.06) !important;
    }

    .ant-card-body {
        padding: 16px !important;
    }

    /* Modern rounded inputs */
    .ant-input,
    .ant-input-number,
    .ant-select-selector {
        border-radius: 12px !important;
        font-size: 16px !important;
        /* Prevent iOS zoom */
        padding: 12px 16px !important;
    }

    /* Larger buttons with rounded corners */
    .ant-btn {
        border-radius: 12px !important;
        font-weight: 500 !important;
        padding: 10px 20px !important;
        height: auto !important;
    }

    .ant-btn-lg {
        border-radius: 14px !important;
        padding: 14px 24px !important;
        font-size: 16px !important;
    }

    /* Smaller modals on mobile */
    .ant-modal {
        max-width: calc(100vw - 32px) !important;
        margin: 16px auto !important;
        border-radius: 20px !important;
        overflow: hidden;
    }

    .ant-modal-content {
        border-radius: 20px !important;
    }

    /* Better table experience on mobile */
    .ant-table-wrapper {
        overflow-x: auto;
        border-radius: 16px;
    }

    /* Swipeable elements hint */
    .swipe-hint {
        position: relative;
    }

    .swipe-hint::after {
        content: '';
        position: absolute;
        right: 0;
        top: 0;
        bottom: 0;
        width: 30px;
        background: linear-gradient(to left, white, transparent);
        pointer-events: none;
    }

    /* Better spacing for touch */
    .ant-list-item {
        padding: 16px !important;
    }

    /* Enhanced cards with hover effect */
    .ant-card:active {
        transform: scale(0.98);
        transition: transform 0.15s ease;
    }
}

/* Very small screens */
@media (max-width: 475px) {
    .ant-card {
        border-radius: 12px !important;
    }

    .ant-card-body {
        padding: 12px !important;
    }

    /* Stack segmented controls */
    .ant-segmented {
        width: 100%;
        border-radius: 12px !important;
    }

    .ant-segmented-item {
        min-width: auto;
        flex: 1;
        border-radius: 8px !important;
    }

    /* Larger modal bottom sheets */
    .ant-modal {
        margin: 0 !important;
        max-width: 100% !important;
        bottom: 0;
        position: fixed;
        border-radius: 20px 20px 0 0 !important;
    }

    .ant-modal-content {
        border-radius: 20px 20px 0 0 !important;
    }

    /* Pull handle for bottom sheets */
    .ant-modal-header::before {
        content: '';
        position: absolute;
        top: 8px;
        left: 50%;
        transform: translateX(-50%);
        width: 40px;
        height: 4px;
        background: rgba(0, 0, 0, 0.15);
        border-radius: 2px;
    }

    /* Фиксируем скролл только внутри модального окна */
    .ant-modal-wrap {
        overflow: hidden !important;
    }

    .ant-modal-body {
        max-height: calc(100vh - 200px);
        overflow-y: auto !important;
        -webkit-overflow-scrolling: touch;
        overscroll-behavior: contain;
    }
}